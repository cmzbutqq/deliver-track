# tofix

后端配送进度的时间计算目前过于虚假，让他更加真实：

**时间数组定义（单位：秒）**：
- t0(orderId): array[float]，t0[i] = 高德API预测到达第i个路径点的累计耗时（秒），t0[0] = 0
- t_esti(orderId): array[float] = t0 / speed，预计到达各路径点的累计耗时（秒）
  - speed 是物流公司的配送速度系数（0 < speed <= 1，表示配送速度相对开车的比例，speed越小配送越慢）
  - 物流公司不再设置预定配送时间，仅设置 speed 系数
- factor(orderId): float = random_range(max=1.2, min=0.85)，订单的随机波动系数（延迟概率略高于提前）
- t_real(orderId): array[float] = t_esti * factor，实际到达各路径点的累计耗时（秒）

**更新机制**：
- 计算相邻路径点的时间差：delta_t[i] = t_real[i] - t_real[i-1]（秒）
- 实际更新间隔 = max(delta_t[i] / 3600, 0.1)（秒），实现1秒对应1小时的演示加速，最小间隔0.1秒避免更新过于频繁
- 根据 t_real 数组按时间顺序更新位置，使用定时器而非固定5秒间隔
- 存储：t_real 数组存储在 Route 表中（新增字段 timeArray: Json）

**其他调整**：
- 配送区不再预设配送时效，仅指定物流公司，预计配送时间由 speed 和路径距离共同决定（t_esti 的最后一个元素）


---

深色/浅色切换现在是怎么做的？

---

当前的登录验证形同虚设，攻击者通过更改url即可直接进入商家后台

---

可视化看板找示例

异常订单监控：在数据看板中实时展示配送超时或出现异常的订单（如超过预计送达时间、长时间停留在同一位置等）。
路线规划进阶挑战：模拟多点配送场景，在批量发货时实现一次性为多个订单规划最优路径（TSP算法）；

考虑实时路况，动态调整规划路线。
mock interview
